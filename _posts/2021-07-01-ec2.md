## EC2란?
아마존 웹 서비스 (AWS)의 여러 서비스중 가장 먼저 생겨난 서비스 중 하나로, 가장 범용적으로 사용되고 있습니다. EC2는 독립된 컴퓨터 한대를 임대해서 사용할 수 있게 해주는 서비스 것입니다
<br>
### EC2의 장점
1. 마우스 클릭 몇 번만으로도 컴퓨터 한대를 구성할 수 있습니다.
2. 원하는 스펙의 가상 서버를 구축하고, 스펙을 사용한 만큼의 비용만 지불합니다.
3. 스펙을 줄이거나 높이는게 가능하며 방법또한 쉽습니다.
4. EBS (Elastic Block Store) 볼륨을 구성하여 영구 스토리지로 저장이 가능합니다.
5. EIP (Elastic IP Address) 를 사용하여 고정 IP를 할당할 수 있습니다.
<br>
### EC2 리전
그럼 어디에서 컴퓨터를 임대한다는 걸까요? AWS는 국가(리전)별로 데이터 센터를 가지고 있습니다.
사용자는 '내가 어느나라 데이터 센터에 있는 컴퓨터를 쓸거야'라고 지정한 후 PC를 임대하면 됩니다.
<br>
![20210706_171942](/assets/20210706_171942.png)
<br>
### EC2 instance
하나의 EC2 Instance는 컴퓨터 한 대를 구성한다의 의미입니다. 인스턴스 생성시 다양한 컴퓨터 스펙과 운영체제를 설정할 수 있는 옵션을 제공하고 있습니다.
또한 생성하면서 저장공간, 네트워크 IP 주소, 보안 등을 함께 설정할 수 있습니다.
인스턴스를 확인하는 방법은 AWS EC2의 인스턴스에서 확인할 수 있습니다.
<br>
![20210706_172217](/assets/20210706_172217.png)
<br>

## EC2 인스턴스 생성하기
###1. 리전 선택 후 인스턴스 시작 클릭
리전을 선택하는 이유는 내가 접속하는 서버가 거리상 가까이 있어야 더 빠르게 작업할 수 있기 떄문입니다.
![20210706_173000](/assets/20210706_173000.png)
<br>
###2. AMI 선택
AMI는 인스턴스를 시작하는데 필요한 소프트웨어 구성이 포함된 템플릿입니다. 사전에 만들어둔 AMI가 없다면 AWS에서 지원하는 OS를 선택합니다. '프리 티어 사용 가능'은 1년간 무료로 사용할 수 있습니다.
<br>
![20210706_173238](/assets/20210706_173238.png)
<br>

###3. 인스턴스 유형 선택
AWS 에서는 다양한 컴퓨터 스펙을 제공하고 있습니다. '프리 티어'인 경우에는 사용할 수 있는 유형이 정해져 있고, 다른 옵션을 사용하면 비용이 부과됩니다.
유형(목적)에 따라 suffix 명칭이 달라집니다. 예를들면 CPU 성능에 중점을 두는 경우 c, MEMORY 성능에 중점을 두는 경우 m 등의 명칭이 부여됩니다.
<br>
![20210706_174252](/assets/20210706_174252.png)
<br>
###4.인스턴스 구성
- `인스턴스 갯수`: 인스턴스를 몇 개를 만들건지 설정
- `스팟 인스턴스`: 미사용 EC2 용량에 입찰할 수 있음
- `네트워크`: 가상 프라이빗 클라우드 공간을 설정
- `퍼블릭 IP 자동 할당`: 외부 IP에서 인스턴스에 접속할 수 있는 여부 지정
- `종료방식`: 컴퓨터 종료 시, 인스턴스를 중지할 지 삭제할 지를 지정

###5.스토리지 추가
스토리지(디스크) 를 지정합니다. 프리 티어의 경우 30GB 까지는 무료로 사용이 가능하기 때문에, 크기를 30 으로 변경해 주는 것이 좋습니다. 주의점으로 1년후 자동 종료되지 않기 때문에, 비용 부과시 30GB 의 볼륨가격으로 비용이 책정됩니다.

볼륨 유형은 범용 SSD, 프로비저닝된 IOPS SSD, 마그네틱을 지원합니다. 마그네틱은 SSD 보다 성능이 좋지 않기 때문에, 범용 SSD 를 선택해 줍니다. 프로비저닝된 SSD 의 경우 IOPS 를 지정할 수 있고 추가 비용이 부과될 수 있습니다. 새 볼륨 추가를 선택하여 파티션을 나눌 수 있고, 추가 비용이 부과될 수 있습니다.
![20210706_175409](/assets/20210706_175409.png)
<br>

###6. 태그 추가
테스트 목적으로 생성하는 인스턴스에서는 의미가 없을 것 같습니다. 인스턴스가 많아지는 경우 같은 태그를 사용하는 인스턴스 끼리 묶어, 어느 태그에서 비용이 많이 발생되는지, 어느 태그의 인스턴스가 많은지 등을 파악하는데 좋습니다. 라이브서버에서 서비스용도로 태그명을 생성하여 구분지을 수 있습니다.
![20210706_175716](/assets/20210706_175716.png)
<br>

###7. 보안 그룹 구성
보안 그룹은 어느 IP 를 허용할건지, 어떤 PORT 를 오픈할건지 등을 구성할 수 있습니다. 기존에 사용하고 있던 보안그룹 규칙이 있다면 '기존 보안 그룹'을 선택합니다.

기본적으로 0.0.0.0 IP 는 ANY OPEN 입니다. 모든 IP 를 허용하겠다는 의미이며 외부의 공격에 노출될 수 있습니다.
![20210706_175848](/assets/20210706_175848.png)
<br>
##EC2 접속
WSL 환경입니다.
```
# 루트폴더로 이동
cd ~

# .ssh 디렉토리 생성
mkdir .ssh

# 다운받은 pem 파일 복사
cp /mnt/c/Users/actye/Downloads/yejoon.pem ~/.ssh

# pem 파일 권한 설정
chmod 400 yejoon.pem

# aws 서버 접속
ssh =i ~/.ssh/yejoon.pem ubuntu@3.36.117.220
```
<br>
접속된 상태

![3](/assets/3_6zrnz6skz.png)
